<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <link href="css/primeicons.css" rel="stylesheet">
    <link href="css/primeng.css"  rel="stylesheet">
    <link href="css/primeng-theme.css"  rel="stylesheet">
    <link href="css/primeflex.css" rel="stylesheet">
    <title>Document</title>

</head>
<body>
    <input type="text"  id="maximo">
    <textarea name="palabras" id="palabras" cols="30" rows="10"></textarea>
    <span id="contador"></span>
    <div id="contenedor"></div>
    <table> 
        <thead>
            <tr>
                <th> RESULTADO </th>
            </tr>
        </thead>
    </table>
    <div class="plg_radio_group" data-lista-valores="normal=normal:anormal=anormal" data-valor="normal" 
    data-id="1"></div>

    <script >
        var exports = {};
    </script>
    <script src="js/jquery.min.js"></script>
    <script src="js/handlebars.min.js"></script>
    <script src="js/plugin.js"></script>
    <script >
        (function ($) {
            $("#palabras").on('keypress', function (e)  {
                var $el = $(this);
                var palabras = $el.val().split(" ").length;
                var maximo = parseInt($("#maximo").val());
                $("#contador").text(palabras.toString() + "  palabra(s)" );
                if (palabras >= maximo)  {
                    e.preventDefault();
                    e.stopPropagation();

                
                }

            });



        } )($);
        /**$("#contenedor").carusel( {} );*/
    


        $(".LST_OPCIONES").each(function (index, elemen) {

var $this = $(this);
var id = $this.data('id');
$this.on('click', function (event) {
      apex.server.process(
                'update_examen',
                {
                    x01: parseInt(id),
                },
                {
                    dataType: 'text', 
                    success: function(data){
                        apex.region("REPORTE").refresh();
                        console.log(data);
                    }
                }
            );     
});
/*var data = apex.item($this.data('list')).getValue().split(":").map(function (v) {
    var v_arr = v.split("=");
    return v_arr;
});*/

function inicializar_examenes(id_tabla) {
    apex.item(id_tabla).element.find("tbody tr").each(function (i, elem) {
        var $this = $(elem);
        var contenedor = $this.find("div.LST_OPCIONES");
        var nuevo_contenedor = $(`
            <div class="radio_group apex-item-group apex-item-group--rc apex-item-radio">        
                <div class="apex-item-grid radio_group">
                <div class='apex-item-grid-row'> </div>
            </div></div>`);
        var items = apex.item( contenedor.data("lista_valores"))
        .getValue()
        .split(":")
        .map(function (v) {
                    var v_arr = v.split("=");
                return v_arr;
            });;

        var nuevo_contenedor_fila = nuevo_contenedor.find(".apex-item-grid-row")
        items.forEach(function (value, idx_1) {

            var opcion = $('<div class="apex-item-option"></div>');
            var input = $("<input/>");
            var id_input =  'P12_RESULTADO_' + i.toString() + '_' + idx_1.toString()
            input.attr({
                'type':"radio",
                'name': 'P12_RESULTADO_' + i.toString(),
                'id':id_input,
                'value': value[1]
            });
            var label = $("<label class='u-radio' for='"+ id_input +"'></label>").text(value[0]);
            
            opcion.append(input);
            opcion.append(label);
            nuevo_contenedor_fila.append(opcion);

        });
        contenedor.append(nuevo_contenedor);
    });
}
    

//console.log(data);

});
    </script>
</body>
</html>
